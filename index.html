<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Happy Birthday</title>
  <link href="https://fonts.googleapis.com/css?family=Montserrat:700,400&display=swap" rel="stylesheet">
  <style>
    body {
      background: #e5f5fa !important;
      font-family: 'Montserrat', Arial, sans-serif;
      margin: 0;
      min-height: 100vh;
      box-sizing: border-box;
      overflow-x: hidden;
      position: relative;
    }
    .center {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }
    .cake-img {
      width: 240px;
      height: 180px;
      object-fit: cover;
      border-radius: 16px;
      margin-bottom: 24px;
      box-shadow: 0 2px 16px #e6c6d8;
      border: 6px solid #fff;
      transition: box-shadow 0.2s;
      cursor: pointer;
    }
    .cake-img:hover {
      animation: shake 0.5s infinite;
      box-shadow: 0 6px 32px #e6c6d8;
    }
    @keyframes shake {
      0% { transform: rotate(0deg);}
      20% { transform: rotate(-8deg);}
      40% { transform: rotate(8deg);}
      60% { transform: rotate(-6deg);}
      80% { transform: rotate(6deg);}
      100% { transform: rotate(0deg);}
    }
    .birthday-title {
      font-size: 4rem;
      font-weight: bold;
      color: #444;
      margin-bottom: 0.5rem;
      text-align: center;
      line-height: 1.1;
    }
    .birthday-title .pink {
      color: #9ac8e5;
      font-size: 3rem;
      display: inline-block;
      margin-left: 8px;
    }
    .birthday-desc {
      font-size: 1.3rem;
      color: #888;
      margin-bottom: 32px;
      text-align: center;
    }
    .btn {
      padding: 22px 60px;
      border: none;
      border-radius: 32px;
      font-size: 1.6rem;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 4px 16px #e6c6d8;
      background: #9ac8e5;
      color: #fff;
      transition: background 0.2s, transform 0.2s;
      margin-top: 16px;
    }
    .btn:hover {
      background: #6fa6d0;
      transform: translateY(-2px) scale(1.04);
    }
    .music-btn {
      position: fixed;
      right: 32px;
      bottom: 32px;
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: #9ac8e5;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 24px #e6c6d8;
      cursor: pointer;
      z-index: 100;
      border: none;
      outline: none;
      transition: background 0.2s;
    }
    .music-btn:hover {
      background: #6fa6d0;
    }
    .music-btn svg {
      width: 32px;
      height: 32px;
      fill: #222;
    }
    .music-btn.muted {
      background: #f8b6b6;
    }
    /* Firework effect */
    #firework-container {
      position: fixed;
      left: 0; top: 0; width: 100vw; height: 100vh;
      pointer-events: none;
      z-index: 9999;
    }
    .firework-img {
      position: absolute;
      width: 80px;
      opacity: 0.9;
      animation: firework 1s linear forwards;
      pointer-events: none;
      user-select: none;
    }
    @keyframes firework {
      0% { transform: translateY(0) scale(1); opacity: 1;}
      80% { opacity: 1;}
      100% { transform: translateY(-400px) scale(1.2); opacity: 0;}
    }
    #final-images {
      position: fixed;
      left: 0; top: 0; width: 100vw; height: 100vh;
      display: none;
      z-index: 10000;
      pointer-events: none;
      background: rgba(255,255,255,0.0);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      gap: 18px;
    }
    .marquee-wrapper {
      width: 100vw;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      height: 150px;
    }
    .marquee-track {
      display: flex;
      align-items: center;
      gap: 32px;
      will-change: transform;
    }
    .marquee-img {
      width: 180px;
      height: 120px;
      object-fit: cover;
      border-radius: 14px;
      border: 8px solid #fff;
      box-shadow: 0 4px 18px #0004;
      background: #fff;
      flex-shrink: 0;
      margin: 0;
    }
    .marquee-row1 .marquee-track {
      animation: marquee-left 150s linear infinite;
    }
    .marquee-row2 .marquee-track {
      animation: marquee-right 150s linear infinite;
    }
    .marquee-row3 .marquee-track {
      animation: marquee-left 150s linear infinite;
    }
    @keyframes marquee-left {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }
    @keyframes marquee-right {
      0% { transform: translateX(-50%); }
      100% { transform: translateX(0); }
    }
    @media (max-width: 900px) {
      .carousel-container { width: 90vw; height: 90vw; min-width: 240px; min-height: 240px;}
      .carousel-img { width: 90px; height: 60px; border-width: 3px; }
      .marquee-img { width: 90px; height: 60px; border-width: 3px; }
      .marquee-wrapper { height: 70px; }
      #final-images { gap: 8px; }
    }
    .bg-blur-img {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      object-fit: cover;
      z-index: 0;
      
      filter: blur(2px);
      pointer-events: none;
      user-select: none;
    }
    #main-content, #final-images, #firework-container, #envelope-section, #main-section, #thankyou-section, #no-section, #letter-popup, #confirm-open-popup {
      position: relative;
      z-index: 1;
    }
    #arrow-btn {
      display: none;
      position: fixed;
      right: 100px;
      bottom: 38px;
      width: 54px;
      height: 54px;
      border-radius: 50%;
      background: #fff;
      box-shadow: 0 4px 24px #9ac8e566;
      border: none;
      outline: none;
      cursor: pointer;
      z-index: 101;
      align-items: center;
      justify-content: center;
      transition: background 0.2s;
    }
    #arrow-btn:hover {
      background: #e3eefd;
    }
    #arrow-btn svg {
      width: 32px;
      height: 32px;
      fill: #9ac8e5;
    }
    #split-view {
      display: none;
      position: fixed;
      left: 0; top: 0; width: 100vw; height: 100vh;
      z-index: 20000;
      background: #e5f5fa;
      flex-direction: row;
      justify-content: center;
      align-items: center;
    }
    .split-left {
      flex: 1.2;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: none;
    }
    .split-right {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: none;
    }
    .split-img {
      width: 70%;
      max-width: 480px;
      border-radius: 18px;
      border: 10px solid #fff;
      box-shadow: 0 6px 32px #0003;
      object-fit: cover;
      background: #fff;
    }
    .typing-text {
      font-size: 2.2rem;
      color: #628ecb;
      font-weight: bold;
      font-family: 'Montserrat', Arial, sans-serif;
      letter-spacing: 1.5px;
      text-shadow: 0 2px 8px #0001;
      min-height: 3.5em;
      white-space: pre-line;
      word-break: break-word;
    }
    @media (max-width: 900px) {
      #arrow-btn { right: 16px; bottom: 16px; width: 40px; height: 40px; }
      #arrow-btn svg { width: 22px; height: 22px; }
      #split-view { flex-direction: column; }
      .split-left, .split-right { height: 50vh; }
      .split-img { width: 90vw; max-width: 98vw; }
      .typing-text { font-size: 1.2rem; }
    }
  </style>
</head>
<body>
  <audio id="bg-music" src="img/videoplayback.mp4" loop></audio>
  <div class="center" id="main-section">
    <img src="img/ava.jpg" alt="cake" class="cake-img" id="cake-img">
    <div class="birthday-title">
      Happy Birthday<br>
      <span class="pink">Trungggggg!</span> (ÔΩ°‚óï‚Äø‚óïÔΩ°)
    </div>
    <div class="birthday-desc">
      Click the next button!! („Å§‚úßv‚úß)„Å§‚ô°
    </div>
    <button class="btn" id="next-btn">Next!! ‚ô™~‚ô™</button>
  </div>

  <!-- Giao di·ªán b·ª©c th∆∞ -->
  <div id="envelope-section" style="display:none; text-align:center;">
    <img src="img/10-removebg-preview.png" alt="envelope" style="margin-top: 40px; width:320px;max-width:90vw;margin-bottom:24px;">
    <div style="font-size:1.4rem;color:#888;margin:24px 0 32px;">
      Do you want to open it? "„Éæ( ÔΩ•`‚åì¬¥ÔΩ•)Ôæâ"
    </div>
    <button id="open-btn" style="padding:16px 36px;border:none;border-radius:24px;font-size:1.2rem;font-weight:bold;cursor:pointer;background:#9ac8e5;color:#fff;margin-right:16px;">Open it</button>
    <button id="no-btn" style="padding:16px 36px;border:none;border-radius:24px;font-size:1.2rem;font-weight:bold;cursor:pointer;background:#7ed6c1;color:#fff;">NOOO</button>
  </div>

  <!-- Popup th∆∞ ch√∫c m·ª´ng -->
  <div id="letter-popup" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:999;background:rgba(60,40,60,0.45);align-items:center;justify-content:center;">
    <div style="background:#fff;border-radius:16px;max-width:600px;width:90vw;max-height:90vh;overflow:hidden;box-shadow:0 8px 40px #bfa6b8;position:relative;display:flex;flex-direction:column;">
      <div style="background:#f9c6df;padding:18px 32px 12px 32px;border-radius:16px 16px 0 0;font-size:1.3rem;font-weight:bold;color:#7d4b6a;letter-spacing:1px;">
        Ooo.. A message (Ôæâ‚óïo‚óï)Ôæâ‚ô° !!
        <button id="close-letter" style="position:absolute;top:12px;right:18px;background:none;border:none;font-size:1.6rem;color:#7d4b6a;cursor:pointer;">√ó</button>
      </div>
      <div style="background:url('img/letter-bg.png') repeat-x top left #fff;padding:0;height:36px;"></div>
      <div style="flex:1;overflow-y:auto;padding:32px 28px 32px 28px;">
        <div style="font-size:2rem;font-weight:bold;color:#7d4b6a;margin-bottom:18px;text-align:center;">
          Happy Birthday, MI BABYY (^‚Äø^)
        </div>
        <div style="font-size:1.1rem;color:#7d4b6a;line-height:1.7;">
          <p>oh shit, sorry babe, th·ª±c ra t c√≥ ch√∫t qu√™n sinh nh·∫≠t m huhuu. nh∆∞ng kp qu√™n v√¨ nay sinh nh·∫≠t m, m√† v√¨ nay c√≥ qu√° nhi·ªÅu to-do-list ph·∫£i lm n√™n b·∫°n qu√™n m·∫•t. sorry babe r·∫•t nhi·ªÅu nhi·ªÅu lu√¥nnn </p>
          <p>yahh, th·ª±c t√¢m m√† n√≥i th√¨... m√¨nh ch∆∞a c√≥ qu√° nhi·ªÅu c∆° h·ªôi ƒë·ªÉ t√¨m hi·ªÉu v·ªÅ "u". M·∫∑c d√π m th·ªânh tho·∫£ng s·∫Ω hay overthinking v·ªÅ m·ªçi ng∆∞·ªùi xung quanh, nh∆∞ng chung quy l·∫°i, th√¨ trong ƒë·∫ßu m√¨nh ch·ªâ nh·∫≠n ƒë·ªãnh "m√¨nh c√≥ coi h·ªç l√† b·∫°n kh√¥ng" "h·ªç c√≥ t·ªët kh√¥ng" v√† "h·ªç c√≥ x·ª©ng ƒë√°ng kh√¥ng". V√† "u" c≈©ng ch√≠nh l√† nh∆∞ v·∫≠y, m√¨nh coi "u" l√† m·ªôt ng∆∞·ªùi b·∫°n m√¨nh v√¥ c√πng respect, v√¥ c√πng ƒë√°ng h·ªçc h·ªèi v√† r·∫•c r·∫•c t·ª± h√†o. </p>
          <p>
           Th·ªânh tho·∫£ng "u" c√≥ lo l·∫Øng hay nghi ng·ªù v·ªÅ b·∫£n th√¢n th√¨ h√£y c·ª© nghƒ© v·ªÅ nh·ªØng g√¨ v·ªÅ "u" ƒë√£ l√†m ƒë∆∞·ª£c, v√† h√£y nh·ªõ r·∫±ng lu√¥n c√≥ ng∆∞·ªùi ·ªßng h·ªô, tin t∆∞·ªüng v√† s·∫µn s√†ng support "u" ƒë√≥ ch√≠nh l√† "me". H√£y l·∫Øng nghe tr√°i tim nhi·ªÅu h∆°n, h√£y t·ª± tin nhi·ªÅu h∆°n, h√£y c·ªüi m·ªü nhi·ªÅu h∆°n, h√£y b·ª©t ph√° nhi·ªÅu h∆°n.
          </p>
          <p>
            B∆∞·ªõc sang tu·ªïi m·ªõi, ch√∫c ‚Äúu‚Äù ch√¢n c·ª©ng ƒë√° m·ªÅm, v·ªØng b∆∞·ªõc tr√™n con ƒë∆∞·ªùng m√¨nh ch·ªçn, v√† ƒë·ª´ng qu√™n ‚Äúd·ªãu d√†ng‚Äù v√† y√™u l·∫•y b·∫£n than th·∫≠t nhi·ªÅu l√† nhi·ªÅu. H√£y c·ª© r·ª±c r·ª° nh∆∞ c√°ch c·∫≠u v·∫´n lu√¥n th·∫ø, t·ªèa s√°ng theo c√°ch ri√™ng c·ªßa m√¨nh, v√† nh·ªõ r·∫±ng, d√π c√≥ b·∫•t c·ª© ƒëi·ªÅu g√¨ x·∫£y ra, m√¨nh v·∫´n lu√¥n ·ªü ƒë√¢y, d√µi theo v√† t·ª± h√†o v·ªÅ c·∫≠u. Ch√∫c m·ª´ng sinh nh·∫≠t, ng∆∞·ªùi b·∫°n th√¢n y√™u c·ªßa m√¨nh! 
          </p>
          <p>
            Happy Birthday, my friend!! <span style="font-size:1.3em;">‚ù§Ô∏è</span>
          </p>
        </div>
      </div>
    </div>
  </div>
  <!-- Giao di·ªán khi b·∫•m "No ty" -->
  <div id="no-section" style="display:none; text-align:center;">
    <img src="img/cry.jpg" alt="cry" style="margin-top: 50px; width:260px;max-width:90vw;border-radius:16px;box-shadow:0 2px 16px #e6c6d8;border:6px solid #fff;margin-bottom:24px;">
    <div style="font-size:2rem;font-weight:bold;color:#444;margin-bottom:18px;margin-top:12px;">
      Awh.. Let's try again?<br>PLEASEE?
    </div>
    <button id="again-btn" style="padding:16px 36px;border:none;border-radius:24px;font-size:1.2rem;font-weight:bold;cursor:pointer;background:#9ac8e5;color:#fff;margin-top:16px;">Again..?</button>
  </div>
  <!-- Popup x√°c nh·∫≠n m·ªü th∆∞ th·∫≠t -->
  <div id="confirm-open-popup" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:999;background:rgba(60,40,60,0.45);align-items:center;justify-content:center;">
    <div style="background:#fff;border-radius:16px;max-width:400px;width:90vw;overflow:hidden;box-shadow:0 8px 40px #bfa6b8;position:relative;display:flex;flex-direction:column;align-items:center;padding:32px 16px;">
      <img src="img/10-removebg-preview.png" alt="envelope" style="width:220px;max-width:80vw;margin-bottom:24px;">
      <div style="font-size:1.5rem;color:#7d4b6a;margin-bottom:28px;text-align:center;font-weight:bold;">
        Are u readyyy???
      </div>
      <div>
        <button id="open-real-btn" style="padding:14px 32px;border:none;border-radius:24px;font-size:1.1rem;font-weight:bold;cursor:pointer;background:#9ac8e5;color:#fff;margin-right:16px;">Yehhh</button>
        <button id="no-btn-2" style="padding:14px 32px;border:none;border-radius:24px;font-size:1.1rem;font-weight:bold;cursor:pointer;background:#7ed6c1;color:#fff;">Noooo</button>
      </div>
    </div>
  </div>
  <!-- Firework & final images -->
  <div id="firework-container" style="display:none;"></div>
  <div id="final-images" style="display:none;"></div>
  <!-- Giao di·ªán c·∫£m ∆°n -->
  <div id="thankyou-section" style="display:none;">
    <div class="center">
      <img src="img/5.jpg" alt="birthday cake" class="cake-img">
      <div class="birthday-title">
        Love u so muchhhh!!!!<br>
        <span class="pink">my friend!</span> (ÔΩ°‚óï‚Äø‚óïÔΩ°)
      </div>
      <div class="birthday-desc">
        Be strong, love yourself, and shine brightly! („Å§‚óï·¥ó‚óï)„Å§‚ô°
      </div>
    </div>
  </div>
  <button class="music-btn" id="music-btn" title="Toggle music">
    <svg id="music-on" viewBox="0 0 24 24"><path d="M12 3v10.55A4 4 0 1 0 14 17V7h4V3h-6z"/></svg>
    <svg id="music-off" viewBox="0 0 24 24" style="display:none;"><path d="M16.5 12c0-2.485-2.015-4.5-4.5-4.5S7.5 9.515 7.5 12s2.015 4.5 4.5 4.5 4.5-2.015 4.5-4.5zm-4.5 6c-3.314 0-6-2.686-6-6s2.686-6 6-6 6 2.686 6 6-2.686 6-6 6zm8.485-1.071l-1.414-1.414A7.963 7.963 0 0 0 20 12c0-4.418-3.582-8-8-8S4 7.582 4 12c0 1.657.507 3.197 1.371 4.485l-1.414 1.414A9.953 9.953 0 0 1 2 12C2 6.477 6.477 2 12 2s10 4.477 10 10c0 2.21-.721 4.247-1.929 5.929z"/></svg>
  </button>
  <button id="arrow-btn" title="Next">
    <svg viewBox="0 0 24 24"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6z"/></svg>
  </button>
  <div id="split-view">
    <div class="split-left">
      <img id="split-img" class="split-img" src="" alt="split-img" />
    </div>
    <div class="split-right">
      <div class="typing-text" id="typing-text"></div>
    </div>
  </div>
  <script>
    const music = document.getElementById('bg-music');
    const musicBtn = document.getElementById('music-btn');
    const musicOn = document.getElementById('music-on');
    const musicOff = document.getElementById('music-off');
    let isMuted = false;

    // Auto play music on load
    window.addEventListener('DOMContentLoaded', () => {
      // Try to play music after user interaction (for browser policy)
      const playMusic = () => {
        music.volume = 0.7;
        music.play().catch(()=>{});
        document.body.removeEventListener('click', playMusic);
      };
      document.body.addEventListener('click', playMusic);
      // Also try to play after a short delay
      setTimeout(() => {
        music.volume = 0.7;
        music.play().catch(()=>{});
      }, 800);
    });

    // Music button toggle
    musicBtn.onclick = () => {
      isMuted = !isMuted;
      music.muted = isMuted;
      musicOn.style.display = isMuted ? 'none' : '';
      musicOff.style.display = isMuted ? '' : 'none';
      musicBtn.classList.toggle('muted', isMuted);
    };

    document.getElementById('next-btn').onclick = () => {
      document.getElementById('main-section').style.display = 'none';
      document.getElementById('envelope-section').style.display = '';
    };

    // S·ª± ki·ªán cho n√∫t "Open it"
    document.getElementById('open-btn').onclick = () => {
      document.getElementById('confirm-open-popup').style.display = 'flex';
    };

    // Firework & final images logic
    const fireworkContainer = document.getElementById('firework-container');
    const finalImages = document.getElementById('final-images');
    // 15 ·∫£nh ch·∫°y ngang
    const images = Array.from({length: 15}, (_, i) => `img/${i+1}.jpg`);

    // Hi·ªán n√∫t m≈©i t√™n sau 5s khi showFinalImages
    let arrowTimeout;
    function showFinalImages() {
      fireworkContainer.style.display = 'none';
      finalImages.style.display = 'flex';
      finalImages.innerHTML = '';

      // Th√™m d√≤ng ch·ªØ x√°m
  const label = document.createElement('div');
  label.style.width = '100vw';
  label.style.textAlign = 'center';
  label.innerHTML = `<span style="color:#383838;font-size:1.25rem;font-family:'Montserrat',Arial,sans-serif;letter-spacing:1px;">
    - *a few moments ‚ú©¬∞ÔΩ°‚ãÜ‚∏ú üéß‚úÆ
  </span>`;
  finalImages.appendChild(label);

      // X√≥a h·ªôp qu√† n·∫øu c√≤n
      let mainGift = document.getElementById('main-gift-img');
      if (mainGift) mainGift.remove();

      // ·∫¢nh cho 3 h√†ng
      const images1 = Array.from({length: 18}, (_, i) => `img/${18-i}.jpg`);
      const images2 = Array.from({length: 18}, (_, i) => `img/${i+1}.jpg`);
      const images3 = Array.from({length: 18}, (_, i) => `img/${18-i}.jpg`);

      function createMarqueeRow(imagesArr, rowClass) {
        const wrapper = document.createElement('div');
        wrapper.className = `marquee-wrapper ${rowClass}`;
        const track = document.createElement('div');
        track.className = 'marquee-track';

        // L·∫∑p l·∫°i ·∫£nh 2 l·∫ßn ƒë·ªÉ ch·∫°y li√™n t·ª•c
        const repeat = 5;
const allImgs = [];
for (let r = 0; r < repeat; r++) {
  allImgs.push(...imagesArr);
}
allImgs.forEach(src => {
  const img = document.createElement('img');
  img.src = src;
  img.className = 'marquee-img';
  track.appendChild(img);
});

        wrapper.appendChild(track);
        return wrapper;
      }

      finalImages.appendChild(createMarqueeRow(images1, 'marquee-row1'));
      finalImages.appendChild(createMarqueeRow(images2, 'marquee-row2'));
      finalImages.appendChild(createMarqueeRow(images3, 'marquee-row3'));

      // Hi·ªán n√∫t m≈©i t√™n sau 5s n·∫øu c·∫ßn
      clearTimeout(arrowTimeout);
      document.getElementById('arrow-btn').style.display = 'none';
      arrowTimeout = setTimeout(() => {
        document.getElementById('arrow-btn').style.display = 'flex';
      }, 5000);
    }

    // N√∫t "Open it for real"
    document.getElementById('open-real-btn').onclick = () => {
      document.getElementById('confirm-open-popup').style.display = 'none';
      // ·∫®n t·∫•t c·∫£ giao di·ªán kh√°c
      document.getElementById('main-section').style.display = 'none';
      document.getElementById('envelope-section').style.display = 'none';
      document.getElementById('no-section').style.display = 'none';
      document.getElementById('thankyou-section').style.display = 'none';
      fireworkContainer.style.display = 'block';
      finalImages.style.display = 'none';
      fireworkContainer.innerHTML = '';

      // Hi·ªán h·ªôp qu√† ·ªü gi·ªØa d∆∞·ªõi c√πng m√†n h√¨nh
      let box = document.createElement('img');
      box.src = 'img/10.png'; // ·∫£nh h·ªôp qu√† ch√≠nh
      box.style.position = 'fixed';
      box.style.left = '50%';
      box.style.bottom = '0';
      box.style.transform = 'translateX(-50%)';
      box.style.width = '200px';
      box.style.maxWidth = '60vw';
      box.style.zIndex = '10001';
      box.id = 'main-gift-img';
      document.body.appendChild(box);

      // Animation ph√°o hoa t·ª´ h·ªôp qu√† (ch·ªâ l√™n tr√™n c√°c h∆∞·ªõng)
      const style = document.createElement('style');
      style.innerHTML = `
      @keyframes firework-from-box {
        0% { transform: translateX(-50%) translate(0,0) scale(1); opacity: 1;}
        80% { opacity: 1;}
        100% { transform: translateX(-50%) translate(var(--x), calc(-1 * var(--y))) scale(1); opacity: 0;}
      }`;
      document.head.appendChild(style);

      // C√°c h∆∞·ªõng b·∫Øn: ch·ªâ l√™n tr√™n, ch√©o tr√°i, ch√©o ph·∫£i, sang tr√°i/ph·∫£i nh∆∞ng v·∫´n h∆∞·ªõng l√™n
      const directions = [
        {angle: Math.PI/2}, // l√™n tr√™n
        {angle: Math.PI/3}, // ch√©o ph·∫£i l√™n
        {angle: 2*Math.PI/3}, // ch√©o tr√°i l√™n
        {angle: Math.PI/4}, // ch√©o ph·∫£i l√™n nh·∫π
        {angle: 3*Math.PI/4}, // ch√©o tr√°i l√™n nh·∫π
        {angle: Math.PI/6}, // ch√©o ph·∫£i l√™n nhi·ªÅu
        {angle: 5*Math.PI/6} // ch√©o tr√°i l√™n nhi·ªÅu
      ];

      function launchFireworkFromBox() {
        // Ch·ªçn ng·∫´u nhi√™n h∆∞·ªõng b·∫Øn l√™n tr√™n
        const dir = directions[Math.floor(Math.random() * directions.length)];
        const distance = 320 + Math.random() * 80;
        const x = Math.cos(dir.angle) * distance;
        const y = Math.sin(dir.angle) * distance;
        const img = document.createElement('img');
        img.src = images[Math.floor(Math.random() * images.length)];
        img.className = 'firework-img';
        img.style.left = '50%';
        img.style.bottom = '80px'; // ngay tr√™n h·ªôp qu√†
        img.style.transform = 'translateX(-50%)';
        img.style.width = '80px';
        img.style.height = '80px';
        img.style.objectFit = 'cover';
        img.style.setProperty('--x', `${x}px`);
        img.style.setProperty('--y', `${y}px`);
        img.style.animation = 'firework-from-box 1s linear forwards';
        fireworkContainer.appendChild(img);
        img.addEventListener('animationend', () => img.remove());
      }

      let fireworkInterval = setInterval(launchFireworkFromBox, 460);
      setTimeout(() => {
        clearInterval(fireworkInterval);
        showFinalImages();
        // X√≥a h·ªôp qu√† ch√≠nh khi hi·ªán ·∫£nh n·ªïi l√™n
        setTimeout(() => {
          fireworkContainer.style.display = 'none';
          let mainGift = document.getElementById('main-gift-img');
          if (mainGift) mainGift.remove();
          style.remove();
        }, imageCount * 400 + 1200);
      }, 6000);
    };

    // N√∫t "No ty" trong popup x√°c nh·∫≠n
    document.getElementById('no-btn-2').onclick = () => {
      document.getElementById('confirm-open-popup').style.display = 'none';
      document.getElementById('envelope-section').style.display = 'none';
      document.getElementById('no-section').style.display = '';
    };

    // ƒê√≥ng popup th∆∞
    document.getElementById('close-letter').onclick = () => {
      // ·∫®n t·∫•t c·∫£ section kh√°c, ch·ªâ hi·ªán thankyou-section
      document.getElementById('letter-popup').style.display = 'none';
      document.getElementById('main-section').style.display = 'none';
      document.getElementById('envelope-section').style.display = 'none';
      document.getElementById('no-section'). style.display = 'none';
      document.getElementById('confirm-open-popup').style.display = 'none';
      document.getElementById('thankyou-section').style.display = '';
    };
    // S·ª± ki·ªán cho n√∫t "No ty"
    document.getElementById('no-btn').onclick = () => {
      document.getElementById('envelope-section').style.display = 'none';
      document.getElementById('no-section').style.display = '';
    };

    // S·ª± ki·ªán cho n√∫t "Again..?"
    document.getElementById('again-btn').onclick = () => {
      document.getElementById('no-section').style.display = 'none';
      document.getElementById('main-section').style.display = '';
    };

    // S·ª± ki·ªán click m≈©i t√™n
    document.getElementById('arrow-btn').onclick = () => {
      // ·∫®n c√°c giao di·ªán kh√°c
      document.getElementById('final-images').style.display = 'none';
      document.getElementById('arrow-btn').style.display = 'none';

      // Hi·ªán giao di·ªán chia ƒë√¥i
      document.getElementById('split-view').style.display = 'flex';

      // Hi·ªán ·∫£nh b√™n tr√°i (l·∫•y ·∫£nh ƒë·∫ßu ti√™n trong m·∫£ng images)
      document.getElementById('split-img').src = "img/16.png";

      // Sau 2s b·∫Øt ƒë·∫ßu ch·∫°y ch·ªØ t·ª´ng k√Ω t·ª±
      const heading = `<div style="font-size:2.4rem;font-weight:bold;color:#6fa6d0;margin-bottom:20px; margin-right:15px;">Happy Birthday Trungggg!!</div>`;
const text = `Yahh!!.... m·∫∑c d√π t ƒë√£ c·ªë g·∫Øng nghƒ© idea v·ªÅ bi·ªÉn ho·∫∑c ch√®n background, th√¨ n√≥ v·∫´n kh√¥ng th·ªÉ th·∫©m n·ªïi, tr·ªùi ∆°i, n√≥ x·∫•u l·∫Øm √° v√† ph·ªëi m√†u c·ªßa t c≈©ng t·ªá, n√™n t ƒë√£ ch·ªçn m√†u basic.  
Hmmmmm.....ch√∫c m tu·ªïi m·ªõi s·∫Ω h·ªçc h√†nh thu·∫≠n l·ª£i, ra tr∆∞·ªùng ƒë√∫ng h·∫°n v·ªõi t·∫•m b·∫±ng ƒë·∫πp, c√≥ nhi·ªÅu tr·∫£i nghi·ªám th√∫ v·ªã v√† nh·ªØng c∆° h·ªôi m·ªõi. Ch√∫c m th·ª©c khuya s·∫Ω kh√¥ng b·ªã th·∫≠n, code nhi·ªÅu kh√¥ng b·ªã h√≥i, gym th√¨ c·ª© l√™n t·∫° ƒë·ªÅu ƒë·ªÅu, v√† quan tr·ªçng l√† ƒë∆∞·ª£c nhi·ªÅu deal h·ªùi trong cu·ªôc s·ªëng n·ªØa. Ch√∫c m·ªçi m·ª•c ti√™u v√† ∆∞·ªõc nguy·ªán c·ªßa m s·∫Ω th√†nh hi·ªán th·ª±c. I bet you can, wish you all the best!`;
const gifs = `
  <div style="display:flex;gap:18px;justify-content:center;">
    <img src="img/25.jpg" style="width:180px;border-radius:10px;">
    <img src="img/22.jpg" style="width:180px;border-radius:10px;">
    <img src="img/26.jpg" style="width:180px;border-radius:10px;">
  </div>
`;
const typingEl = document.getElementById('typing-text');
typingEl.innerHTML = heading + `<div id="typing-content" style="color:#2b2b2b;font-size:12px;line-height:1.7;margin-right:15px;"></div>`;
setTimeout(() => {
  let i = 0;
  function typeChar() {
    if (i <= text.length) {
      document.getElementById('typing-content').textContent = text.slice(0, i);
      i++;
      setTimeout(typeChar, 55);
    }
    else {
      // Khi ch·∫°y xong ch·ªØ, th√™m gif v√†o
      typingEl.innerHTML += gifs;
    }
  }
  typeChar();
}, 2000);
    };
  </script>
</body>
</html>